{"name":"LoriotDeviceRegistrationComponent","id":"component-LoriotDeviceRegistrationComponent-74be7f503e99d3fa64bccd75fd848003b18ed00c22b05e7449a81a26d2968ba82058b4d6b7a551d37cd727be02472572c6e302fe5c56bb822a082563fc010cba","file":"loriot-device-registration/loriot-device-registration.component.ts","encapsulation":[],"entryComponents":[],"inputs":[],"outputs":[],"providers":[],"selector":"c8y-loriot-registration","styleUrls":[],"styles":[],"templateUrl":["loriot-device-registration.component.html"],"viewProviders":[],"hostDirectives":[],"inputsClass":[],"outputsClass":[],"propertiesClass":[{"name":"bsModalRef","deprecated":false,"deprecationMessage":"","type":"BsModalRef","indexKey":"","optional":false,"description":"","line":199,"modifierKind":[125]},{"name":"connections$","defaultValue":"this.getConnections$()","deprecated":false,"deprecationMessage":"","type":"","indexKey":"","optional":false,"description":"","line":40},{"name":"errorMessages$","defaultValue":"this.errors$.pipe(\n    map(errors => errors.map(error => error.message)),\n    map(messages => uniq(messages))\n  )","deprecated":false,"deprecationMessage":"","type":"","indexKey":"","optional":false,"description":"","line":194},{"name":"errors$","defaultValue":"new BehaviorSubject<Error[]>([])","deprecated":false,"deprecationMessage":"","type":"","indexKey":"","optional":false,"description":"","line":193},{"name":"fields","defaultValue":"[\n    {\n      key: 'title',\n      type: 'string',\n      templateOptions: {\n        placeholder: gettext('LORIOT LoRa'),\n        label: gettext('Title'),\n        required: true\n      }\n    },\n    {\n      key: 'deveui',\n      type: 'string',\n      templateOptions: {\n        placeholder: 'FEDCBA9876543210',\n        label: gettext('Device EUI'),\n        required: true,\n        pattern: '^([A-F0-9]{16})$'\n      },\n      validation: {\n        messages: {\n          pattern: gettext('Must be a valid 16 digit uppercase hexadecimal number.')\n        }\n      }\n    },\n    {\n      key: 'appeui',\n      type: 'string',\n      templateOptions: {\n        placeholder: 'FEDCBA9876543210',\n        label: gettext('Application EUI'),\n        required: true,\n        pattern: '^([a-fA-F0-9]{16})$'\n      },\n      validation: {\n        messages: {\n          pattern: gettext('Must be a valid 16 digit hexadecimal number.')\n        }\n      }\n    },\n    {\n      key: 'appkey',\n      type: 'string',\n      templateOptions: {\n        placeholder: 'FEDCBA9876543210FEDCBA9876543210',\n        label: gettext('Application key'),\n        required: true,\n        pattern: '^([a-fA-F0-9]{32})$'\n      },\n      validation: {\n        messages: {\n          pattern: gettext('Must be a valid 32 digit hexadecimal number.')\n        }\n      }\n    },\n    {\n      key: 'connection',\n      type: 'typeahead',\n      templateOptions: {\n        label: gettext('Connection'),\n        required: true,\n        c8yForOptions: this.connections$,\n        displayProperty: 'name',\n        valueProperties: ['name']\n      }\n    },\n    {\n      key: 'application',\n      type: 'typeahead',\n      templateOptions: {\n        label: gettext('Application name'),\n        required: true,\n        placeholder: gettext('LORIOT application'),\n        displayProperty: 'name',\n        valueProperties: ['hexId']\n      },\n      hooks: {\n        onInit: field => {\n          const connectionControl = field.form.get('connection');\n          connectionControl.valueChanges\n            .pipe(\n              takeUntil(this.unsubscribe$),\n              mergeMap(({ name }) => this.getApplications$(name))\n            )\n            .subscribe(\n              apps => {\n                field.templateOptions.c8yForOptions = of(apps);\n                field.formControl.setValue(null);\n              },\n              error => {\n                field.form.get('application').setErrors({ application: true });\n                field.validators.application.message = error.message;\n              }\n            );\n        }\n      },\n      validators: {\n        application: {\n          expression: (control: AbstractControl) => {\n            return control.status === 'VALID';\n          },\n          message: () => ''\n        }\n      }\n    },\n    {\n      key: 'deviceType',\n      type: 'typeahead',\n      templateOptions: {\n        label: gettext('Device protocol'),\n        required: true,\n        c8yForOptions: this.protocols$,\n        displayProperty: 'name',\n        valueProperties: ['id', 'name']\n      }\n    }\n  ]","deprecated":false,"deprecationMessage":"","type":"FormlyFieldConfig[]","indexKey":"","optional":false,"description":"","line":67},{"name":"finalStepLabels","defaultValue":"{\n    back: gettext('Close')\n  }","deprecated":false,"deprecationMessage":"","type":"object","indexKey":"","optional":false,"description":"","line":188},{"name":"form","defaultValue":"new FormGroup({})","deprecated":false,"deprecationMessage":"","type":"","indexKey":"","optional":false,"description":"","line":37},{"name":"load$","defaultValue":"this.connections$.pipe(\n    catchError((error: Error) => of(error)),\n    switchMap(connections => {\n      if (\n        connections instanceof Error &&\n        connections.name === LoriotErrorName.NoConnectivitySettingsError\n      ) {\n        return of([connections]);\n      }\n      return forkJoin([\n        of(connections),\n        this.protocols$.pipe(catchError((error: Error) => of(error)))\n      ]);\n    }),\n    map(results => {\n      return results.filter(result => {\n        return result instanceof Error;\n      });\n    }),\n    switchMap(errors => {\n      return errors.length === 0 ? of([]) : throwError(errors);\n    })\n  )","deprecated":false,"deprecationMessage":"","type":"","indexKey":"","optional":false,"description":"","line":43},{"name":"model","defaultValue":"{} as any","deprecated":false,"deprecationMessage":"","type":"LoriotDeviceFormly","indexKey":"","optional":false,"description":"","line":38},{"name":"PAGING","defaultValue":"{\n    withTotalPages: true,\n    pageSize: 10\n  }","deprecated":false,"deprecationMessage":"","type":"object","indexKey":"","optional":false,"description":"","line":32,"modifierKind":[148]},{"name":"protocols$","defaultValue":"this.getProtocols$()","deprecated":false,"deprecationMessage":"","type":"","indexKey":"","optional":false,"description":"","line":39},{"name":"registrationStepLabels","defaultValue":"{\n    next: gettext('Register')\n  }","deprecated":false,"deprecationMessage":"","type":"object","indexKey":"","optional":false,"description":"","line":185},{"name":"state","defaultValue":"'loadPending'","deprecated":false,"deprecationMessage":"","type":"LoriotState","indexKey":"","optional":false,"description":"","line":192},{"name":"stepper","deprecated":false,"deprecationMessage":"","type":"C8yStepper","indexKey":"","optional":false,"description":"","line":31},{"name":"unsubscribe$","defaultValue":"new Subject()","deprecated":false,"deprecationMessage":"","type":"Subject<void>","indexKey":"","optional":false,"description":"","line":41}],"methodsClass":[{"name":"create","args":[{"name":"event","type":"literal type","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"any","typeParameters":[],"line":214,"deprecated":false,"deprecationMessage":"","modifierKind":[134],"jsdoctags":[{"name":"event","type":"literal type","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},{"name":"getApplications$","args":[{"name":"name","type":"","deprecated":false,"deprecationMessage":""}],"optional":false,"returnType":"any","typeParameters":[],"line":253,"deprecated":false,"deprecationMessage":"","jsdoctags":[{"name":"name","type":"","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},{"name":"getConnections$","args":[],"optional":false,"returnType":"any","typeParameters":[],"line":249,"deprecated":false,"deprecationMessage":""},{"name":"getLoriotDeviceToSend","args":[],"optional":false,"returnType":"LoriotDevice","typeParameters":[],"line":236,"deprecated":false,"deprecationMessage":""},{"name":"getProtocols$","args":[],"optional":false,"returnType":"any","typeParameters":[],"line":245,"deprecated":false,"deprecationMessage":""},{"name":"ngOnDestroy","args":[],"optional":false,"returnType":"void","typeParameters":[],"line":257,"deprecated":false,"deprecationMessage":""}],"deprecated":false,"deprecationMessage":"","hostBindings":[],"hostListeners":[],"standalone":false,"imports":[],"description":"","rawdescription":"\n","type":"component","assetsDirs":[],"constructorObj":{"name":"constructor","description":"","deprecated":false,"deprecationMessage":"","args":[{"name":"bsModalRef","type":"BsModalRef","deprecated":false,"deprecationMessage":""},{"name":"loriotService","type":"LoriotProviderService","deprecated":false,"deprecationMessage":""},{"name":"gainsightService","type":"GainsightService","deprecated":false,"deprecationMessage":""}],"line":197,"jsdoctags":[{"name":"bsModalRef","type":"BsModalRef","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"name":"loriotService","type":"LoriotProviderService","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}},{"name":"gainsightService","type":"GainsightService","deprecated":false,"deprecationMessage":"","tagName":{"text":"param"}}]},"extends":[]}